(function($){$('#_gamipress_wc_award_points').on('change',function(){if($(this).prop('checked')){$(this).closest('.cmb-row').siblings('.cmb-row').show()}else{$(this).closest('.cmb-row').siblings('.cmb-row').hide()}});$('#_gamipress_wc_award_points').trigger('change');$('.requirements-list').on('change','.select-post',function(){var $this=$(this);var trigger_type=$this.siblings('.select-trigger-type').val();var post_id=$this.val();var site_id=$this.siblings('.select-post-site-id').val();var variation_input=$this.siblings('.wc-variation');if(post_id&&post_id.length&&(trigger_type==='gamipress_wc_product_variation_purchase'||trigger_type==='gamipress_wc_product_variation_refund')){$('<span class="spinner is-active" style="float: none; margin: 0 2px 0 4px;"></span>').insertAfter(variation_input);variation_input.hide();setTimeout(function(){site_id=$this.siblings('.select-post-site-id').val();$.post(ajaxurl,{action:'gamipress_wc_get_product_variations',post_id:post_id,site_id:site_id,selected:variation_input.find('select').val()},function(response){variation_input.next('.spinner').remove();variation_input.html(response);variation_input.show()})},10)}else{variation_input.hide()}});$('.requirements-list').on('change','.select-trigger-type',function(){var trigger_type=$(this).val();var purchase_total_inputs=$(this).siblings('.wc-purchase-total');if(trigger_type==='gamipress_wc_new_purchase_total'){purchase_total_inputs.show()}else{purchase_total_inputs.hide()}
var post_id=$(this).siblings('.select-post').val();var variation_input=$(this).siblings('.wc-variation');if(post_id&&post_id.length&&(trigger_type==='gamipress_wc_product_variation_purchase'||trigger_type==='gamipress_wc_product_variation_refund')){variation_input.show()}else{variation_input.hide()}
var category_input=$(this).siblings('.wc-category');if(trigger_type==='gamipress_wc_product_category_purchase'||trigger_type==='gamipress_wc_product_category_refund'){category_input.show()}else{category_input.hide()}
var tag_input=$(this).siblings('.wc-tag');if(trigger_type==='gamipress_wc_product_tag_purchase'||trigger_type==='gamipress_wc_product_tag_refund'){tag_input.show()}else{tag_input.hide()}
var lifetime_inputs=$(this).siblings('.wc-lifetime');if(trigger_type==='gamipress_wc_lifetime_value'){lifetime_inputs.show()}else{lifetime_inputs.hide()}});$('.requirements-list li').each(function(){var trigger_type=$(this).find('.select-trigger-type').val();var purchase_total_inputs=$(this).find('.wc-purchase-total');if(trigger_type==='gamipress_wc_new_purchase_total'){purchase_total_inputs.show()}else{purchase_total_inputs.hide()}
var post_id=$(this).find('.select-post').val();var variation_input=$(this).find('.wc-variation');if(post_id&&post_id.length&&(trigger_type==='gamipress_wc_product_variation_purchase'||trigger_type==='gamipress_wc_product_variation_refund')){variation_input.show()}else{variation_input.hide()}
var category_input=$(this).find('.wc-category');if(trigger_type==='gamipress_wc_product_category_purchase'||trigger_type==='gamipress_wc_product_category_refund'){category_input.show()}else{category_input.hide()}
var tag_input=$(this).find('.wc-tag');if(trigger_type==='gamipress_wc_product_tag_purchase'||trigger_type==='gamipress_wc_product_tag_refund'){tag_input.show()}else{tag_input.hide()}
var lifetime_inputs=$(this).find('.wc-lifetime');if(trigger_type==='gamipress_wc_lifetime_value'){lifetime_inputs.show()}else{lifetime_inputs.hide()}});$('.requirements-list').on('update_requirement_data','.requirement-row',function(e,requirement_details,requirement){if(requirement_details.trigger_type==='gamipress_wc_new_purchase_total'){requirement_details.wc_purchase_total_condition=requirement.find('.wc-purchase-total select').val();requirement_details.wc_purchase_total=requirement.find('.wc-purchase-total input').val()}
if(requirement_details.trigger_type==='gamipress_wc_product_variation_purchase'||requirement_details.trigger_type==='gamipress_wc_product_variation_refund'){requirement_details.wc_variation_id=requirement.find('.wc-variation select').val()}
if(requirement_details.trigger_type==='gamipress_wc_product_category_purchase'||requirement_details.trigger_type==='gamipress_wc_product_category_refund'){requirement_details.wc_category_id=requirement.find('.wc-category select').val()}
if(requirement_details.trigger_type==='gamipress_wc_product_tag_purchase'||requirement_details.trigger_type==='gamipress_wc_product_tag_refund'){requirement_details.wc_tag_id=requirement.find('.wc-tag select').val()}
if(requirement_details.trigger_type==='gamipress_wc_lifetime_value'){requirement_details.wc_lifetime_condition=requirement.find('.wc-lifetime select').val();requirement_details.wc_lifetime=requirement.find('.wc-lifetime input').val()}})})(jQuery)